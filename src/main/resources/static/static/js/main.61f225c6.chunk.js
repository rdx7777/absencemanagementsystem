(this["webpackJsonpabsence-management-system"]=this["webpackJsonpabsence-management-system"]||[]).push([[0],{44:function(e,a,t){e.exports=t(78)},49:function(e,a,t){},50:function(e,a,t){},78:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(38),l=t.n(s),c=(t(49),t(3)),o=t(4),i=t(9),m=t(6),d=t(7),u=(t(50),t(39)),h=t.n(u),p=t(24),E=t.n(p),g=t(40),v=t.n(g),b=t(41),f=t.n(b),C=new(function(){function e(){Object(c.a)(this,e)}return Object(o.a)(e,[{key:"login",value:function(e,a){return f.a.post("api/auth/signin",{username:e,password:a}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),y=function(e){if(!e)return r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},N=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).handleLogin=n.handleLogin.bind(Object(i.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(i.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(i.a)(n)),n.state={username:"",password:"",loading:!1,message:""},n}return Object(o.a)(t,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var a=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?C.login(this.state.username,this.state.password).then((function(){a.props.history.push({pathname:"/user",state:{requiredPage:1}}),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();a.setState({loading:!1,message:t})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"card card-container"},r.a.createElement("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),r.a.createElement(h.a,{onSubmit:this.handleLogin,ref:function(a){e.form=a}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(E.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[y]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(E.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[y]})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.loading},this.state.loading&&r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),r.a.createElement("span",null,"Login"))),this.state.message&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.message)),r.a.createElement(v.a,{style:{display:"none"},ref:function(a){e.checkBtn=a}}))))}}]),t}(n.Component),S=t(2),w=t(21),P=t(19),O=t(11),R=t.n(O),A=t(13),j=t(79),k=t(80),T=t(81),x=t(82),D=t(83),H=t(84);function U(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var q=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).emptyCase={user:"",headTeacher:"",startDate:"",endDate:"",partDayType:"",absenceReason:"",userComment:"",isCoverRequired:"",isCoverProvided:"",coverSupervisorComment:"",isApprovedByHeadTeacher:"",isAbsencePaid:"",headTeacherComment:"",hrSupervisorComment:"",isCaseResolved:""},n.state={aCase:n.emptyCase,users:[],headTeachers:[],requiredPage:null,returnAddress:void 0},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.handleUserChange=n.handleUserChange.bind(Object(i.a)(n)),n.handleHeadTeacherChange=n.handleHeadTeacherChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(A.a)(R.a.mark((function e(){var a,t,n,r,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage,returnAddress:this.props.location.state.returnAddress}),e.next=3,fetch("/api/users/headteachers",{headers:U()});case 3:return e.next=5,e.sent.json();case 5:return a=e.sent,e.next=8,fetch("/api/users",{headers:U()});case 8:return e.next=10,e.sent.json();case 10:if(t=e.sent,n=C.getCurrentUser(),r=t.filter((function(e){return!(e.id===n.id)})),"new"===this.props.match.params.id){e.next=22;break}return e.next=16,fetch("/api/cases/".concat(this.props.match.params.id),{headers:U()});case 16:return e.next=18,e.sent.json();case 18:s=e.sent,this.setState({aCase:s,users:r,headTeachers:a}),e.next=23;break;case 22:this.setState({users:r,headTeachers:a});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var a=e.target,t=a.value,n=a.name,r=Object(P.a)({},this.state.aCase);r[n]=t,this.setState({aCase:r})}},{key:"handleUserChange",value:function(e){var a=this.state.users,t=e.target.value,n=Object(P.a)({},this.state.aCase);n.user=a[t],this.setState({aCase:n})}},{key:"handleHeadTeacherChange",value:function(e){var a=this.state.headTeachers,t=e.target.value,n=Object(P.a)({},this.state.aCase);n.headTeacher=a[t],this.setState({aCase:n})}},{key:"handleSubmit",value:function(){var e=Object(A.a)(R.a.mark((function e(a){var t,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t=this.state.aCase,n=C.getCurrentUser().id,(r=new Headers(U())).set("Accept","application/json"),r.set("Content-Type","application/json"),e.next=8,fetch("/api/cases"+(t.id?"?id="+t.id+"&userId="+n:""),{method:t.id?"PUT":"POST",headers:r,body:JSON.stringify(t)});case 8:this.props.history.push({pathname:"".concat(this.state.returnAddress),state:{requiredPage:this.state.requiredPage}});case 9:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.aCase,t=e.users,n=e.headTeachers,s=r.a.createElement("h2",{className:"mb-n1"},a.id?"Edit Case":"Add Case"),l=t.map((function(e,a){return r.a.createElement("option",{key:a,value:a},e.name," ",e.surname)})),c=n.map((function(e,a){return r.a.createElement("option",{key:a,value:a},e.name," ",e.surname)}));return r.a.createElement("div",null,r.a.createElement(j.a,null,s,r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-5 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"user"},"Select user\xa0(default:\xa0"),r.a.createElement(x.a,{className:"mb-0 font-weight-bold",for:"user"},a.user.name," ",a.user.surname),r.a.createElement(x.a,{className:"mb-0",for:"user"},")\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger",for:"user"},"*"),r.a.createElement(D.a,{type:"select",name:"user",id:"user",defaultValue:a.user,onChange:this.handleUserChange},r.a.createElement("option",null),l)),r.a.createElement(T.a,{className:"col-md-5 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"headTeacher"},"Select Head Teacher (default:\xa0"),r.a.createElement(x.a,{className:"mb-0 font-weight-bold",for:"headTeacher"},a.headTeacher.name," ",a.headTeacher.surname),r.a.createElement(x.a,{className:"mb-0",for:"headTeacher"},")\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger",for:"headTeacher"},"*"),r.a.createElement(D.a,{type:"select",name:"headTeacher",id:"headTeacher",defaultValue:a.headTeacher,onChange:this.handleHeadTeacherChange},r.a.createElement("option",null),c))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"startDate"},"Start date\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"text",name:"startDate",id:"startDate",value:a.startDate,onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"endDate"},"End date\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"text",name:"endDate",id:"endDate",value:a.endDate,onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"partDayType"},"Part day type\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"partDayType",id:"partDayType",value:a.partDayType,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"Morning"},"Morning"),r.a.createElement("option",{value:"Afternoon"},"Afternoon"),r.a.createElement("option",{value:"AllDay"},"All day")))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-5 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"absenceReason"},"Absence reason\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"textarea",name:"absenceReason",id:"absenceReason",value:a.absenceReason,onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-5 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"userComment"},"User comment"),r.a.createElement(D.a,{type:"textarea",name:"userComment",id:"userComment",value:a.userComment,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"isCoverRequired"},"Cover required\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"isCoverRequired",id:"isCoverRequired",value:a.isCoverRequired,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"false"},"no"),r.a.createElement("option",{value:"true"},"yes"))),r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"isCoverProvided"},"Cover provided\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"isCoverProvided",id:"isCoverProvided",value:a.isCoverProvided,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"false"},"no"),r.a.createElement("option",{value:"true"},"yes"))),r.a.createElement(T.a,{className:"col-md-6 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"coverSupervisorComment"},"Cover Supervisor comment"),r.a.createElement(D.a,{type:"textarea",name:"coverSupervisorComment",id:"coverSupervisorComment",value:a.coverSupervisorComment,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"isApprovedByHeadTeacher"},"Absence approved\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"isApprovedByHeadTeacher",id:"isApprovedByHeadTeacher",value:a.isApprovedByHeadTeacher,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"false"},"no"),r.a.createElement("option",{value:"true"},"yes"))),r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"isAbsencePaid"},"Absence paid\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"isAbsencePaid",id:"isAbsencePaid",value:a.isAbsencePaid,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"false"},"no"),r.a.createElement("option",{value:"true"},"yes"))),r.a.createElement(T.a,{className:"col-md-6 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"headTeacherComment"},"Head Teacher comment"),r.a.createElement(D.a,{type:"textarea",name:"headTeacherComment",id:"headTeacherComment",value:a.headTeacherComment,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-6 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"hrSupervisorComment"},"HR Supervisor comment"),r.a.createElement(D.a,{type:"textarea",name:"hrSupervisorComment",id:"hrSupervisorComment",value:a.hrSupervisorComment,onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-2 mb-n2"},r.a.createElement(x.a,{className:"mb-0",for:"isCaseResolved"},"Case resolved\xa0"),r.a.createElement(x.a,{className:"mb-0 text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"isCaseResolved",id:"isCaseResolved",value:a.isCaseResolved,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"false"},"no"),r.a.createElement("option",{value:"true"},"yes"))),r.a.createElement(S.b,{className:"col-md-1 mb-n2 h-25 align-self-end mr-1",to:{pathname:"".concat(this.state.returnAddress),state:{requiredPage:this.state.requiredPage}}},r.a.createElement(H.a,{color:"secondary",style:{display:"new"===this.props.match.params.id?"":"none"}},"Cancel")),r.a.createElement(H.a,{className:"col-md-1 mb-n2 h-25 align-self-end mr-1",color:"primary",type:"submit"},"Save")," "),r.a.createElement(T.a,null))))}}]),t}(n.Component),L=Object(w.f)(q),I=t(85),_=t(22),M="LEFT",B=function(e,a){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=a;)r.push(n),n+=t;return r},V=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).gotoPage=function(e){var a=n.props.onPageChanged,t=void 0===a?function(e){return e}:a,r=Math.max(0,Math.min(e,n.totalPages)),s={currentPage:r,totalPages:n.totalPages,pageLimit:n.pageLimit,totalRecords:n.totalRecords};n.setState({currentPage:r},(function(){return t(s)}))},n.handleClick=function(e){return function(a){a.preventDefault(),n.gotoPage(e)}},n.handleMoveLeft=function(e){e.preventDefault(),n.gotoPage(n.state.currentPage-2*n.pageNeighbours-1)},n.handleMoveRight=function(e){e.preventDefault(),n.gotoPage(n.state.currentPage+2*n.pageNeighbours+1)},n.fetchPageNumbers=function(){var e=n.totalPages,a=n.state.currentPage,t=n.pageNeighbours,r=2*n.pageNeighbours+3;if(e>r+2){var s=Math.max(2,a-t),l=Math.min(e-1,a+t),c=B(s,l),o=s>2,i=e-l>1,m=r-(c.length+1);switch(!0){case o&&!i:var d=B(s-m,s-1);c=[M].concat(Object(_.a)(d),Object(_.a)(c));break;case!o&&i:var u=B(l+1,l+m);c=[].concat(Object(_.a)(c),Object(_.a)(u),["RIGHT"]);break;case o&&i:default:c=[M].concat(Object(_.a)(c),["RIGHT"])}return[1].concat(Object(_.a)(c),[e])}return B(1,e)};var r=e.totalRecords,s=void 0===r?null:r,l=e.pageLimit,o=void 0===l?30:l,i=e.pageNeighbours,m=void 0===i?0:i,d=e.requiredPage,u=void 0===d?1:d;return n.totalRecords="number"===typeof s?s:0,n.pageLimit="number"===typeof o?o:30,n.pageNeighbours="number"===typeof m?Math.max(0,Math.min(m,2)):0,n.requiredPage="number"===typeof u?u:1,n.totalPages=Math.ceil(n.totalRecords/n.pageLimit),0===n.totalPages&&(n.totalPages=1),n.state={currentPage:u},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.gotoPage(this.requiredPage)}},{key:"componentWillReceiveProps",value:function(e,a){this.totalRecords=this.props.totalRecords,this.totalPages=Math.ceil(this.totalRecords/this.pageLimit),this.state.currentPage>this.totalPages&&0!==this.totalRecords&&(this.setState({currentPages:this.totalPages}),this.gotoPage(this.state.currentPage)),this.forceUpdate()}},{key:"render",value:function(){var e=this;if(!this.totalRecords||1===this.totalPages)return null;var a=this.state.currentPage,t=this.fetchPageNumbers();return r.a.createElement(n.Fragment,null,r.a.createElement("nav",{"aria-label":"Cases Pagination"},r.a.createElement("ul",{className:"pagination align-content-md-center"},t.map((function(t,n){return t===M?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:e.handleMoveLeft},r.a.createElement("span",{"aria-hidden":"true"},"\xab"),r.a.createElement("span",{className:"sr-only"},"Previous"))):"RIGHT"===t?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#","aria-label":"Next",onClick:e.handleMoveRight},r.a.createElement("span",{"aria-hidden":"true"},"\xbb"),r.a.createElement("span",{className:"sr-only"},"Next"))):r.a.createElement("li",{key:n,className:"page-item".concat(a===t?" active":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:e.handleClick(t)},t))})))))}}]),t}(n.Component),Y=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onPageChanged=function(e){var a=e.currentPage,t=e.totalPages,r=e.pageLimit;fetch("api/users?offset=".concat((a-1)*r,"&limit=").concat(r),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentUsers:e,isLoading:!1,currentPage:a,totalPages:t,pageLimit:r})}))},n.state={users:[],currentUsers:[],totalUsers:null,currentPage:null,requiredPage:null,totalPages:null,pageLimit:null,isLoading:!0},n.remove=n.remove.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage}),this.setState({isLoading:!0}),fetch("api/users/count",{headers:U()}).then((function(e){return e.json()})).then((function(a){return e.setState({totalUsers:a,isLoading:!1})}))}},{key:"remove",value:function(){var e=Object(A.a)(R.a.mark((function e(a){var t,n=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers(U())).set("Accept","application/json"),t.set("Content-Type","application/json"),e.next=5,fetch("/api/users/".concat(a),{method:"DELETE",headers:t}).then((function(){fetch("api/users/count",{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({totalUsers:e,isLoading:!1})})).then((function(){var e=n.state,a=e.currentPage,t=e.pageLimit;fetch("api/users?offset=".concat((a-1)*t,"&limit=").concat(t),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentUsers:e,isLoading:!1})}))}))}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.currentUsers;if(a.isLoading)return r.a.createElement("p",null,"Loading...");var n=t.map((function(a){var t,n;return t=a.isActive?"yes":"no","ROLE_USER"===a.role&&(n="user"),"ROLE_CS_SUPERVISOR"===a.role&&(n="cover supervisor"),"ROLE_HEAD_TEACHER"===a.role&&(n="head teacher"),"ROLE_HR_SUPERVISOR"===a.role&&(n="HR supervisor"),"ROLE_ADMIN"===a.role&&(n="admin"),r.a.createElement("tr",{key:a.id},r.a.createElement("td",null,a.id),r.a.createElement("td",null,a.name||""," ",a.surname||""),r.a.createElement("td",null,a.email),r.a.createElement("td",null,a.jobTitle),r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,r.a.createElement(S.b,{to:{pathname:"/users/"+a.id,state:{requiredPage:e.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"warning"},"Edit")),r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"danger",onClick:function(){window.confirm("Are you sure you want to delete this user?")&&e.remove(a.id)}},"Delete")))}));return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(S.b,{to:{pathname:"/users/new",state:{requiredPage:this.state.currentPage}}},r.a.createElement(H.a,{color:"success"},"Add User"))),r.a.createElement("h3",null,"Users"),r.a.createElement(I.a,{className:"mt-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",{width:"15%"},"Name & Surname"),r.a.createElement("th",{width:"20%"},"Email"),r.a.createElement("th",{width:"20%"},"Job Title"),r.a.createElement("th",{width:"5%"},"Active?"),r.a.createElement("th",{width:"10%"},"Authorisation"),r.a.createElement("th",{width:"15%"},"Actions"))),r.a.createElement("tbody",null,n)),r.a.createElement("div",{className:"d-flex flex-row py-4 align-items-center"},r.a.createElement(V,{totalRecords:this.state.totalUsers,pageLimit:4,pageNeighbours:1,requiredPage:this.state.requiredPage,onPageChanged:this.onPageChanged}))))}}]),t}(n.Component),z=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).emptyUser={name:"",surname:"",email:"",password:"",jobTitle:"",isActive:"",position:"",role:""},n.state={user:n.emptyUser,requiredPage:null},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(A.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage}),"new"===this.props.match.params.id){e.next=8;break}return e.next=4,fetch("/api/users/".concat(this.props.match.params.id),{headers:U()});case 4:return e.next=6,e.sent.json();case 6:a=e.sent,this.setState({user:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var a=e.target,t=a.value,n=a.name,r=Object(P.a)({},this.state.user);r[n]=t,this.setState({user:r})}},{key:"handleSubmit",value:function(){var e=Object(A.a)(R.a.mark((function e(a){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t=this.state.user,(n=new Headers(U())).set("Accept","application/json"),n.set("Content-Type","application/json"),e.next=7,fetch("/api/users"+(t.id?"/"+t.id:""),{method:t.id?"PUT":"POST",headers:n,body:JSON.stringify(t)});case 7:this.props.history.push({pathname:"/users",state:{requiredPage:this.state.requiredPage}});case 8:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.user,a=r.a.createElement("h2",null,e.id?"Edit User":"Add User");return r.a.createElement("div",null,r.a.createElement(j.a,null,a,r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-4 mb-3"},r.a.createElement(x.a,{for:"name"},"Name\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"name"},"*"),r.a.createElement(D.a,{type:"text",name:"name",id:"name",value:e.name,onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-4 mb-3"},r.a.createElement(x.a,{for:"surname"},"Surname\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"surname"},"*"),r.a.createElement(D.a,{type:"text",name:"surname",id:"surname",value:e.surname,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-4 mb-3"},r.a.createElement(x.a,{for:"email"},"Email\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"email"},"*"),r.a.createElement(D.a,{type:"email",name:"email",id:"email",value:e.email,onChange:this.handleChange,placeholder:"user email"})),r.a.createElement(T.a,{className:"col-md-6 mb-3"},r.a.createElement(x.a,{for:"password"},"Password\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"password"},"*"),r.a.createElement(D.a,{type:"text",name:"password",id:"password",value:e.password,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-4 mb-3"},r.a.createElement(x.a,{for:"jobTitle"},"Job title\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"jobTitle"},"*"),r.a.createElement(D.a,{type:"text",name:"jobTitle",id:"jobTitle",value:e.jobTitle,onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-2 mb-3"},r.a.createElement(x.a,{for:"isActive"},"User active?\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"isActive"},"*"),r.a.createElement(D.a,{type:"select",name:"isActive",id:"isActive",value:e.isActive,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"false"},"no"),r.a.createElement("option",{value:"true"},"yes")))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-2 mb-3"},r.a.createElement(x.a,{for:"position"},"Position\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"position"},"*"),r.a.createElement(D.a,{type:"select",name:"position",id:"position",value:e.position,onChange:this.handleChange},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"Employee"},"Employee"),r.a.createElement("option",{value:"CoverSupervisor"},"Cover Supervisor"),r.a.createElement("option",{value:"HeadTeacher"},"Head Teacher"),r.a.createElement("option",{value:"HumanResourcesSupervisor"},"HR Supervisor"))),r.a.createElement(T.a,{className:"col-md-4 mb-3"},r.a.createElement(x.a,{for:"role"},"Authorisation\xa0"),r.a.createElement(x.a,{className:"text-danger",for:"role"},"*"),r.a.createElement(D.a,{type:"select",name:"role",id:"role",value:e.role,onChange:this.handleChange},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"ROLE_USER"},"authorisation: user"),r.a.createElement("option",{value:"ROLE_CS_SUPERVISOR"},"authorisation: cover supervisor"),r.a.createElement("option",{value:"ROLE_HEAD_TEACHER"},"authorisation: head teacher"),r.a.createElement("option",{value:"ROLE_HR_SUPERVISOR"},"authorisation: HR supervisor"),r.a.createElement("option",{value:"ROLE_ADMIN"},"authorisation: admin")))),r.a.createElement(T.a,null,r.a.createElement(H.a,{color:"primary",type:"submit"},"Save")," ",r.a.createElement(S.b,{to:{pathname:"/users",state:{requiredPage:this.state.requiredPage}}},r.a.createElement(H.a,{color:"secondary"},"Cancel"))))))}}]),t}(n.Component),J=Object(w.f)(z),W=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onPageChanged=function(e){var a=C.getCurrentUser().id,t=e.currentPage,r=e.totalPages,s=e.pageLimit,l=(t-1)*s;fetch("api/cases/user/".concat(a,"?offset=").concat(l,"&limit=").concat(s),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentCases:e,isLoading:!1,currentPage:t,totalPages:r,pageLimit:s})}))},n.state={cases:[],currentCases:[],totalCases:null,currentPage:null,requiredPage:null,totalPages:null,pageLimit:null,isLoading:!0,seen:!1},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage}),this.setState({isLoading:!0});var a=C.getCurrentUser().id;fetch("api/cases/count/user/"+a,{headers:U()}).then((function(e){return e.json()})).then((function(a){return e.setState({totalCases:a,isLoading:!1})}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.currentCases;if(a.isLoading)return r.a.createElement("p",null,"Loading...");var n=t.map((function(a){var t;return t=a.isCaseResolved?"yes":"no",r.a.createElement("tr",{key:a.id},r.a.createElement("td",null,a.id),r.a.createElement("td",null,a.headTeacher.name||""," ",a.headTeacher.surname||""),r.a.createElement("td",null,a.startDate),r.a.createElement("td",null,a.endDate),r.a.createElement("td",null,a.absenceReason),r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"primary",onClick:function(){return e.props.history.push({pathname:"/case_details",state:{aCase:a,returnAddress:"/user",requiredPage:e.state.currentPage}})}},"Details")))}));return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(S.b,{to:{pathname:"/add_user_case",state:{returnAddress:"/user",requiredPage:this.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"success"},"Add Your Case"))),r.a.createElement("h3",null,"Your Absence Cases"),r.a.createElement(I.a,{className:"mt-4 "},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",{width:"10%"},"Head Teacher"),r.a.createElement("th",{width:"5%"},"Start Date"),r.a.createElement("th",{width:"5%"},"End Date"),r.a.createElement("th",{width:"10%"},"Absence Reason"),r.a.createElement("th",{width:"8%"},"Case Resolved?"),r.a.createElement("th",{width:"10%"},"Actions"))),r.a.createElement("tbody",null,n)),r.a.createElement("div",{className:"d-flex flex-row py-4 align-items-center"},r.a.createElement(V,{totalRecords:this.state.totalCases,pageLimit:4,pageNeighbours:1,requiredPage:this.state.requiredPage,onPageChanged:this.onPageChanged}))))}}]),t}(n.Component),F=Object(w.f)(W),G=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).emptyCase={id:"",user:"",headTeacher:"",startDate:"",endDate:"",partDayType:"",absenceReason:"",userComment:"",isCoverRequired:"",isCoverProvided:"",coverSupervisorComment:"",isApprovedByHeadTeacher:"",isAbsencePaid:"",headTeacherComment:"",hrSupervisorComment:"",isCaseResolved:""},n.state={aCase:n.emptyCase,user:void 0,headTeachers:[],requiredPage:null,returnAddress:void 0},n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.handleHeadTeacherChange=n.handleHeadTeacherChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(A.a)(R.a.mark((function e(){var a,t,n,r,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage,returnAddress:this.props.location.state.returnAddress}),a=C.getCurrentUser(),e.next=4,fetch("/api/users/".concat(a.id),{headers:U()});case 4:return e.next=6,e.sent.json();case 6:return t=e.sent,e.next=9,fetch("/api/users/headteachers",{headers:U()});case 9:return e.next=11,e.sent.json();case 11:n=e.sent,r=n.filter((function(e){return!(e.id===a.id)})),(s=this.state.aCase).id=null,s.user=t,s.isCoverProvided=!1,s.isApprovedByHeadTeacher=!1,s.isAbsencePaid=!1,s.isCaseResolved=!1,this.setState({aCase:s,user:t,headTeachers:r});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var a=e.target,t=a.value,n=a.name,r=Object(P.a)({},this.state.aCase);r[n]=t,this.setState({aCase:r})}},{key:"handleHeadTeacherChange",value:function(e){var a=this.state.headTeachers,t=e.target.value,n=Object(P.a)({},this.state.aCase);n.headTeacher=a[t],this.setState({aCase:n})}},{key:"handleSubmit",value:function(){var e=Object(A.a)(R.a.mark((function e(a){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t=this.state.aCase,(n=new Headers(U())).set("Accept","application/json"),n.set("Content-Type","application/json"),e.next=7,fetch("/api/cases",{method:"POST",headers:n,body:JSON.stringify(t)});case 7:this.props.history.push({pathname:"".concat(this.state.returnAddress),state:{requiredPage:this.state.requiredPage}});case 8:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.aCase,t=e.headTeachers,n=r.a.createElement("h2",null,"Add Case"),s=C.getCurrentUser(),l=t.filter((function(e){return!(e.id===s.id)})).map((function(e,a){return r.a.createElement("option",{key:a,value:a},e.name," ",e.surname)}));return r.a.createElement("div",null,r.a.createElement(j.a,null,n,r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-4 mb-3"},r.a.createElement(x.a,null,"User: ",a.user.name," ",a.user.surname))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-4 mb-3"},r.a.createElement(x.a,{for:"headTeacher"},"Select Head Teacher\xa0"),r.a.createElement(x.a,{className:"text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"headTeacher",id:"headTeacher",defaultValue:a.headTeacher,onChange:this.handleHeadTeacherChange},r.a.createElement("option",null),l)),r.a.createElement(T.a,{className:"col-md-2 mb-3"},r.a.createElement(x.a,{for:"startDate"},"Start Date\xa0"),r.a.createElement(x.a,{className:"text-danger"},"*"),r.a.createElement(D.a,{type:"text",name:"startDate",id:"startDate",value:a.startDate,placeholder:"YYYY-MM-DD",onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-2 mb-3"},r.a.createElement(x.a,{for:"endDate"},"End Date\xa0"),r.a.createElement(x.a,{className:"text-danger"},"*"),r.a.createElement(D.a,{type:"text",name:"endDate",id:"endDate",value:a.endDate,placeholder:"YYYY-MM-DD",onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-2 mb-3"},r.a.createElement(x.a,{for:"partDayType"},"Part Day Type\xa0"),r.a.createElement(x.a,{className:"text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"partDayType",id:"partDayType",value:a.partDayType,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"Morning"},"Morning"),r.a.createElement("option",{value:"Afternoon"},"Afternoon"),r.a.createElement("option",{value:"AllDay"},"All day")))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-5 mb-3"},r.a.createElement(x.a,{for:"absenceReason"},"Absence Reason\xa0"),r.a.createElement(x.a,{className:"text-danger"},"*"),r.a.createElement(D.a,{type:"textarea",name:"absenceReason",id:"absenceReason",value:a.absenceReason,onChange:this.handleChange})),r.a.createElement(T.a,{className:"col-md-5 mb-3"},r.a.createElement(x.a,{for:"userComment"},"User Comment"),r.a.createElement(D.a,{type:"textarea",name:"userComment",id:"userComment",value:a.userComment,onChange:this.handleChange}))),r.a.createElement("div",{className:"row"},r.a.createElement(T.a,{className:"col-md-2 mb-3"},r.a.createElement(x.a,{for:"isCoverRequired"},"Cover Required\xa0"),r.a.createElement(x.a,{className:"text-danger"},"*"),r.a.createElement(D.a,{type:"select",name:"isCoverRequired",id:"isCoverRequired",value:a.isCoverRequired,onChange:this.handleChange},r.a.createElement("option",null),r.a.createElement("option",{value:"false"},"no"),r.a.createElement("option",{value:"true"},"yes")))),r.a.createElement(T.a,null,r.a.createElement(H.a,{color:"primary",type:"submit"},"Save")," ",r.a.createElement(S.b,{to:{pathname:"".concat(this.state.returnAddress),state:{requiredPage:this.state.requiredPage}}},r.a.createElement(H.a,{color:"secondary"},"Cancel"))))))}}]),t}(n.Component),K=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onPageChanged=function(e){var a=e.currentPage,t=e.totalPages,r=e.pageLimit;fetch("api/cases/active?offset=".concat((a-1)*r,"&limit=").concat(r),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentCases:e,isLoading:!1,currentPage:a,totalPages:t,pageLimit:r})}))},n.state={cases:[],currentCases:[],totalCases:null,currentPage:null,requiredPage:null,totalPages:null,pageLimit:null,displayButton:"none",displayHeadTeacherButton:"none",isLoading:!0},n.remove=n.remove.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage}),this.setState({isLoading:!0});var a=C.getCurrentUser();a.roles.includes("ROLE_ADMIN")&&this.setState({displayButton:""}),a.roles.includes("ROLE_HEAD_TEACHER")&&this.setState({displayHeadTeacherButton:""}),fetch("api/cases/active/count",{headers:U()}).then((function(e){return e.json()})).then((function(a){return e.setState({totalCases:a,isLoading:!1})}))}},{key:"remove",value:function(){var e=Object(A.a)(R.a.mark((function e(a){var t,n=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers(U())).set("Accept","application/json"),t.set("Content-Type","application/json"),e.next=5,fetch("/api/cases/".concat(a),{method:"DELETE",headers:t}).then((function(){fetch("api/cases/active/count",{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({totalCases:e,isLoading:!1})})).then((function(){var e=n.state,a=e.currentPage,t=e.pageLimit;fetch("api/cases/active?offset=".concat((a-1)*t,"&limit=").concat(t),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentCases:e,isLoading:!1})}))}))}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.currentCases,n=a.displayButton,s=a.displayHeadTeacherButton;if(a.isLoading)return r.a.createElement("p",null,"Loading...");var l=t.map((function(a){var t,s,l;return t=a.isCoverRequired?"yes":"no",s=a.isCoverProvided?"yes":"no",l=a.isCaseResolved?"yes":"no",r.a.createElement("tr",{key:a.id},r.a.createElement("td",{style:{whiteSpace:"nowrap"}},a.id),r.a.createElement("td",null,a.user.name||""," ",a.user.surname||""),r.a.createElement("td",null,a.headTeacher.name||""," ",a.headTeacher.surname||""),r.a.createElement("td",null,a.startDate),r.a.createElement("td",null,a.endDate),r.a.createElement("td",null,t),r.a.createElement("td",null,s),r.a.createElement("td",null,l),r.a.createElement("td",null,r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"primary",onClick:function(){return e.props.history.push({pathname:"/case_details",state:{aCase:a,returnAddress:"/active_cases",requiredPage:e.state.currentPage}})}},"Details"),r.a.createElement(S.b,{to:{pathname:"/cases/"+a.id,state:{returnAddress:"/active_cases",requiredPage:e.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"warning",disabled:!!a.isCaseResolved},"Edit")),r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center",display:"".concat(n)},size:"sm",color:"danger",onClick:function(){window.confirm("Are you sure you want to delete this case?")&&e.remove(a.id)}},"Delete")))}));return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(S.b,{to:{pathname:"/active_cases_managed_by_headteacher",state:{requiredPage:1}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center",display:"".concat(s)},color:"primary"},"Show All Active Head Teacher Cases")),r.a.createElement(S.b,{to:{pathname:"/cases",state:{requiredPage:1}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"primary"},"Show All Cases")),r.a.createElement(S.b,{to:{pathname:"/cases/new",state:{returnAddress:"/active_cases",requiredPage:this.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"success"},"Add Employee Case"))),r.a.createElement("h3",null,"Absence Cases (active)"),r.a.createElement(I.a,{className:"mt-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",{width:"15%"},"User"),r.a.createElement("th",{width:"15%"},"Head Teacher"),r.a.createElement("th",{width:"10%"},"Start date"),r.a.createElement("th",{width:"10%"},"End date"),r.a.createElement("th",{width:"5%"},"Cover required?"),r.a.createElement("th",{width:"5%"},"Cover provided?"),r.a.createElement("th",{width:"5%"},"Case resolved?"),r.a.createElement("th",{width:"20%"},"Actions"))),r.a.createElement("tbody",null,l)),r.a.createElement("div",{className:"d-flex flex-row py-4 align-items-center"},r.a.createElement(V,{totalRecords:this.state.totalCases,pageLimit:4,pageNeighbours:1,requiredPage:this.state.requiredPage,onPageChanged:this.onPageChanged}))))}}]),t}(n.Component),Q=Object(w.f)(K),$=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(Q,null)}}]),t}(n.Component),X=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onPageChanged=function(e){var a=C.getCurrentUser().id,t=e.currentPage,r=e.totalPages,s=e.pageLimit,l=(t-1)*s;fetch("api/cases/active/ht/".concat(a,"?offset=").concat(l,"&limit=").concat(s),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentCases:e,isLoading:!1,currentPage:t,totalPages:r,pageLimit:s})}))},n.state={cases:[],currentCases:[],totalCases:null,currentPage:null,requiredPage:null,totalPages:null,pageLimit:null,isLoading:!0},n.remove=n.remove.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage}),this.setState({isLoading:!0});var a=C.getCurrentUser().id;fetch("api/cases/active/count/ht/"+a,{headers:U()}).then((function(e){return e.json()})).then((function(a){return e.setState({totalCases:a,isLoading:!1})}))}},{key:"remove",value:function(){var e=Object(A.a)(R.a.mark((function e(a){var t,n,r=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers(U())).set("Accept","application/json"),t.set("Content-Type","application/json"),n=C.getCurrentUser(),e.next=6,fetch("/api/cases/".concat(a),{method:"DELETE",headers:t}).then((function(){fetch("api/cases/active/count/ht/"+n.id,{headers:U()}).then((function(e){return e.json()})).then((function(e){return r.setState({totalCases:e,isLoading:!1})})).then((function(){var e=r.state,t=e.currentPage,n=e.pageLimit,s=(t-1)*n;fetch("api/cases/active/ht/".concat(a,"?offset=").concat(s,"&limit=").concat(n),{headers:U()}).then((function(e){return e.json()})).then((function(e){return r.setState({currentCases:e,isLoading:!1})}))}))}));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.currentCases;if(a.isLoading)return r.a.createElement("p",null,"Loading...");var n=t.map((function(a){var t,n,s;return t=a.isCoverRequired?"yes":"no",n=a.isCoverProvided?"yes":"no",s=a.isCaseResolved?"yes":"no",r.a.createElement("tr",{key:a.id},r.a.createElement("td",{style:{whiteSpace:"nowrap"}},a.id),r.a.createElement("td",null,a.user.name||""," ",a.user.surname||""),r.a.createElement("td",null,a.headTeacher.name||""," ",a.headTeacher.surname||""),r.a.createElement("td",null,a.startDate),r.a.createElement("td",null,a.endDate),r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",null,s),r.a.createElement("td",null,r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"primary",onClick:function(){return e.props.history.push({pathname:"/case_details",state:{aCase:a,returnAddress:"/active_cases_managed_by_headteacher",requiredPage:e.state.currentPage}})}},"Details"),r.a.createElement(S.b,{to:{pathname:"/cases/"+a.id,state:{returnAddress:"/active_cases_managed_by_headteacher",requiredPage:e.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"warning",disabled:!!a.isCaseResolved},"Edit"))))}));return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(S.b,{to:{pathname:"/active_cases",state:{requiredPage:1}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"primary"},"Show All Active Cases")),r.a.createElement(S.b,{to:{pathname:"/cases",state:{requiredPage:1}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"primary"},"Show All Cases")),r.a.createElement(S.b,{to:{pathname:"/cases/new",state:{returnAddress:"/active_cases_managed_by_headteacher",requiredPage:this.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"success"},"Add Employee Case"))),r.a.createElement("h3",null,"Absence Cases Managed By You (active)"),r.a.createElement(I.a,{className:"mt-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",{width:"15%"},"User"),r.a.createElement("th",{width:"15%"},"Head Teacher"),r.a.createElement("th",{width:"10%"},"Start date"),r.a.createElement("th",{width:"10%"},"End date"),r.a.createElement("th",{width:"5%"},"Cover required?"),r.a.createElement("th",{width:"5%"},"Cover provided?"),r.a.createElement("th",{width:"5%"},"Case resolved?"),r.a.createElement("th",{width:"20%"},"Actions"))),r.a.createElement("tbody",null,n)),r.a.createElement("div",{className:"d-flex flex-row py-4 align-items-center"},r.a.createElement(V,{totalRecords:this.state.totalCases,pageLimit:4,pageNeighbours:1,requiredPage:this.state.requiredPage,onPageChanged:this.onPageChanged}))))}}]),t}(n.Component),Z=Object(w.f)(X),ee=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(Q,null)}}]),t}(n.Component),ae=t(86),te=t(87),ne=t(88),re=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e,a,t,n,s,l,c=this.props.location.state.aCase,o=this.props.location.state.returnAddress,i=this.props.location.state.requiredPage;return e="AllDay"===c.partDayType?"All day":c.partDayType,a=c.isCoverRequired?"YES":"NO",t=c.isCoverProvided?"YES":"NO",n=c.isApprovedByHeadTeacher?"YES":"NO",s=c.isAbsencePaid?"YES":"NO",l=c.isCaseResolved?"YES":"NO",r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement(ae.a,null,r.a.createElement(te.a,null,"Case details"),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-2 mb-1"},"Case id:\xa0\xa0",c.id),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-4 mb-1"},"User:\xa0\xa0",c.user.name," ",c.user.surname),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-6 mb-1"},"User title:\xa0\xa0",c.user.jobTitle)),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-5 mb-1"},"Head Teacher:\xa0\xa0",c.headTeacher.name," ",c.headTeacher.surname),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-7 mb-1"},"Head Teacher title:\xa0\xa0",c.headTeacher.jobTitle)),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-4 mb-1"},"Start date:\xa0\xa0",c.startDate),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-4 mb-1"},"End date:\xa0\xa0",c.endDate),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-4 mb-1"},"Part day type:\xa0\xa0",e)),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-12 mb-1"},"Absence reason:\xa0\xa0",c.absenceReason)),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-12 mb-1"},"User comment:\xa0\xa0",c.userComment)),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-2 mb-1"},"Cover required:\xa0",a),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-2 mb-1"},"Cover provided:\xa0",t),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-8 mb-1"},"Cover Supervisor comment:\xa0\xa0",c.coverSupervisorComment)),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-3 mb-1"},"Absence approved:\xa0",n),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-2 mb-1"},"Absence paid:\xa0",s),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-7 mb-1"},"Head Teacher comment:\xa0\xa0",c.headTeacherComment)),r.a.createElement("div",{className:"row"},r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-10 mb-2"},"HR Supervisor comment:\xa0\xa0",c.hrSupervisorComment),r.a.createElement(ne.a,{className:"rounded block-example border border-dark col-md-2 mb-2"},"Case resolved:\xa0",l))),r.a.createElement("div",{className:"float-right"},r.a.createElement(S.b,{to:{pathname:o,state:{requiredPage:i}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"primary"},"Back to list")))))}}]),t}(n.Component),se=Object(w.f)(re),le=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).onPageChanged=function(e){var a=e.currentPage,t=e.totalPages,r=e.pageLimit;fetch("api/cases?offset=".concat((a-1)*r,"&limit=").concat(r),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentCases:e,isLoading:!1,currentPage:a,totalPages:t,pageLimit:r})}))},n.state={allCases:[],currentCases:[],totalCases:null,currentPage:null,requiredPage:null,totalPages:null,pageLimit:null,displayButton:"none",displayHeadTeacherButton:"none",isLoading:!0},n.remove=n.remove.bind(Object(i.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==this.props.location.state&&this.setState({requiredPage:this.props.location.state.requiredPage}),this.setState({isLoading:!0});var a=C.getCurrentUser();a.roles.includes("ROLE_ADMIN")&&this.setState({displayButton:""}),a.roles.includes("ROLE_HEAD_TEACHER")&&this.setState({displayHeadTeacherButton:""}),fetch("api/cases/count",{headers:U()}).then((function(e){return e.json()})).then((function(a){return e.setState({totalCases:a,isLoading:!1})})).then((function(){}))}},{key:"remove",value:function(){var e=Object(A.a)(R.a.mark((function e(a){var t,n=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers(U())).set("Accept","application/json"),t.set("Content-Type","application/json"),e.next=5,fetch("/api/cases/".concat(a),{method:"DELETE",headers:t}).then((function(){fetch("api/cases/count",{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({totalCases:e,isLoading:!1})})).then((function(){var e=n.state,a=e.currentPage,t=e.pageLimit;fetch("api/cases?offset=".concat((a-1)*t,"&limit=").concat(t),{headers:U()}).then((function(e){return e.json()})).then((function(e){return n.setState({currentCases:e,isLoading:!1})}))}))}));case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.currentCases,n=a.displayButton,s=a.displayHeadTeacherButton;if(a.isLoading)return r.a.createElement("p",null,"Loading...");var l=t.map((function(a){var t,s,l,c=C.getCurrentUser();return t=a.isCoverRequired?"yes":"no",s=a.isCoverProvided?"yes":"no",l=a.isCaseResolved?"yes":"no",r.a.createElement("tr",{key:a.id},r.a.createElement("td",{style:{whiteSpace:"nowrap"}},a.id),r.a.createElement("td",null,a.user.name||""," ",a.user.surname||""),r.a.createElement("td",null,a.headTeacher.name||""," ",a.headTeacher.surname||""),r.a.createElement("td",null,a.startDate),r.a.createElement("td",null,a.endDate),r.a.createElement("td",null,t),r.a.createElement("td",null,s),r.a.createElement("td",null,l),r.a.createElement("td",null,r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"primary",onClick:function(){return e.props.history.push({pathname:"/case_details",state:{aCase:a,returnAddress:"/cases",requiredPage:e.state.currentPage}})}},"Details"),r.a.createElement(S.b,{to:{pathname:"/cases/"+a.id,state:{returnAddress:"/cases",requiredPage:e.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},size:"sm",color:"warning",disabled:!(!a.isCaseResolved||c.roles.includes("ROLE_ADMIN"))},"Edit")),r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center",display:"".concat(n)},size:"sm",color:"danger",onClick:function(){window.confirm("Are you sure you want to delete this case?")&&e.remove(a.id)}},"Delete")))}));return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(S.b,{to:{pathname:"/active_cases_managed_by_headteacher",state:{requiredPage:1}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center",display:"".concat(s)},color:"primary"},"Show All Active Head Teacher Cases")),r.a.createElement(S.b,{to:{pathname:"/active_cases",state:{requiredPage:1}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"primary"},"Show All Active Cases")),r.a.createElement(S.b,{to:{pathname:"/cases/new",state:{returnAddress:"/cases",requiredPage:this.state.currentPage}}},r.a.createElement(H.a,{style:{whiteSpace:"nowrap",margin:"0 5px 0 auto",alignSelf:"center"},color:"success"},"Add Employee Case"))),r.a.createElement("h3",null,"Absence Cases (all)"),r.a.createElement(I.a,{className:"mt-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"Id"),r.a.createElement("th",{width:"15%"},"User"),r.a.createElement("th",{width:"15%"},"Head Teacher"),r.a.createElement("th",{width:"10%"},"Start date"),r.a.createElement("th",{width:"10%"},"End date"),r.a.createElement("th",{width:"5%"},"Cover required?"),r.a.createElement("th",{width:"5%"},"Cover provided?"),r.a.createElement("th",{width:"5%"},"Case resolved?"),r.a.createElement("th",{width:"20%"},"Actions"))),r.a.createElement("tbody",null,l)),r.a.createElement("div",{className:"d-flex flex-row py-4 align-items-center"},r.a.createElement(V,{totalRecords:this.state.totalCases,pageLimit:4,pageNeighbours:1,requiredPage:this.state.requiredPage,onPageChanged:this.onPageChanged}))))}}]),t}(n.Component),ce=Object(w.f)(le),oe=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("h2",{className:"mb-3"},"Absence Management System"),r.a.createElement("p",{className:"mb-1"},"This simple application has been designed to facilitate handling of crew absences in one of public schools in Cumbria."),r.a.createElement("p",{className:"mb-3"},"If you want, you can implement it for free in your school (or other organization) \u2013 in this case contact me on: ",r.a.createElement("a",{href:"mailto:radek.jerzynski@gmail.com"},"radek.jerzynski@gmail.com")),r.a.createElement("h5",null,"I. HOW TO USE THIS APP"),r.a.createElement("ul",{className:"ml-lg-0"},r.a.createElement("li",{className:"mb-0"},"Logging in is required to use this app. You can log in as: USER, COVER SUPERVISOR, HEAD TEACHER, HUMAN RESOURCES SUPERVISOR or ADMIN."),r.a.createElement("li",{className:"mb-0"},"After logging in, each user can see their User Board with all their absence cases, can add their absence case and view the details of the case. User cannot edit or delete absence cases on this dashboard. USER can see only User Board."),r.a.createElement("li",{className:"mb-0"},'COVER SUPERVISOR, HEAD TEACHERS, HUMAN RESOURCES SUPERVISOR and ADMIN have also access to Cover Supervisor Board / Head Teacher Board / HR Supervisor Board / Admin Board respectively. These boards display a list of all active cases by default. It is also possible to display a list of all cases using the button "Show All Cases". HEAD TEACHER can also display a list of self-managed active cases.'),r.a.createElement("li",{className:"mb-0"},'Case details can be viewed by clicking the "Details" button.'),r.a.createElement("li",{className:"mb-0"},'Each active case (not marked as "resolved") can be edited.'),r.a.createElement("li",{className:"mb-0"},'Clicking "Add Employee Case" opens a form that allows you to add a new absence case of each user existing in the database.'),r.a.createElement("li",{className:"mb-0"},"Only ADMIN can delete any case. It happens very rarely."),r.a.createElement("li",{className:"mb-0"},'If a case marked as "resolved" must be edited, ADMIN can do this.'),r.a.createElement("li",{className:"mb-0"},r.a.createElement("a",null,"And only ADMIN can see, add, edit and delete users from the database, including her/himself. "),r.a.createElement("a",{className:"font-weight-bold text-danger"},"So be very careful"),r.a.createElement("a",null," \u2013 after deleting user with ADMIN authorisation, managing users will be impossible. In this case just contact me ("),r.a.createElement("a",{href:"mailto:radek.jerzynski@gmail.com"},"radek.jerzynski@gmail.com"),r.a.createElement("a",null,"), I will solve this problem adding a new admin to the database."))),r.a.createElement(S.b,{to:"/help2",className:"mr-5"},"II. Predefined users and cases"),r.a.createElement(S.b,{to:"/help3",className:"mr-5"},"III. Application requirements"),r.a.createElement(S.b,{to:"/help4",className:"mr-5"},"IV. How it works"),r.a.createElement(S.b,{to:"/help5",className:"mr-5"},"V. TO DO")))}}]),t}(n.Component),ie=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("h2",{className:"mb-3"},"Absence Management System"),r.a.createElement("h5",null,"II. PREDEFINED USERS AND CASES"),r.a.createElement("p",{className:"mb-1"},"To let you test this application there are some predefined users and absence cases in the database."),r.a.createElement("p",{className:"mb-1"},"You can log in as one of predefined users:"),r.a.createElement("ul",{className:"ml-lg-0 mb-1"},r.a.createElement("li",{className:"mb-0"},"USER (basic) \u2013 login: rdx7777.test@gmail.com, rdx7777.test1@gmail.com"),r.a.createElement("li",{className:"mb-0"},"COVER SUPERVISOR \u2013 login: rdx7777.test2@gmail.com"),r.a.createElement("li",{className:"mb-0"},"HEAD TEACHER \u2013 login: rdx7777.test3@gmail.com, rdx7777.test4@gmail.com"),r.a.createElement("li",{className:"mb-0"},"HUMAN RESOURCES SUPERVISOR \u2013 login: rdx7777.test5@gmail.com"),r.a.createElement("li",{className:"mb-0"},"ADMIN \u2013 login: rdx.7777@yahoo.com"),r.a.createElement("li",{className:"mb-0"},"A password for every account is: test")),r.a.createElement("p",{className:"mb-1"},"After logging in as a USER, you can see all user cases, add a case and display details of the case."),r.a.createElement("p",{className:"mb-1"},'As a COVER SUPERVISOR, HEAD TEACHER or HUMAN RESOURCES SUPERVISOR you can act as a USER and additionally see all active case in the organization, see all cases (including these marked as "resolved") and display the details of each case. You can also add and edit a case of any user existing in the database. Before doing it check the ',r.a.createElement(S.b,{to:"/help3"},"requirements"),"."),r.a.createElement("p",{className:"mb-1"},"There are also some predefined absence cases saved in the database \u2013 you can explore them after logging in as a specific user."),r.a.createElement(S.b,{to:"/help",className:"mr-5"},"I. How to use this app"),r.a.createElement(S.b,{to:"/help3",className:"mr-5"},"III. Application requirements"),r.a.createElement(S.b,{to:"/help4",className:"mr-5"},"IV. How it works"),r.a.createElement(S.b,{to:"/help5",className:"mr-5"},"V. TO DO")))}}]),t}(n.Component),me=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("h2",{className:"mb-3"},"Absence Management System"),r.a.createElement("h5",null,"III. APPLICATION REQUIREMENTS"),r.a.createElement("ul",{className:"ml-lg-0"},r.a.createElement("li",{className:"font-weight-bold mb-1"},"Users saved in the database"),r.a.createElement("p",{className:"mb-1"},"The application requires that the following users with properly assigned authorisation roles and positions are saved in the database:"),r.a.createElement("p",{className:"mb-0"},"1. ADMIN (position: Employee, authorisation: admin)"),r.a.createElement("p",{className:"mb-0"},"2. COVER SUPERVISOR (position: Cover Supervisor, authorisation: cover supervisor)"),r.a.createElement("p",{className:"mb-0"},"3. HEAD TEACHER (position: Head Teacher, authorisation: head teacher)"),r.a.createElement("p",{className:"mb-0"},"4. HUMAN RESOURCES SUPERVISOR (position: HR supervisor, authorisation: HR supervisor)"),r.a.createElement("p",{className:"mb-1"},'5. and some "simple" USERS of course (position: Employee, authorisation: user)'),r.a.createElement("p",{className:"mb-1"},r.a.createElement("a",null,"Only one COVER SUPERVISOR and only one HUMAN RESOURCES SUPERVISOR can be saved in the database. "),r.a.createElement("a",null,"When any next of these supervisors are added to database, "),r.a.createElement("a",{className:"text-danger"},"the app will not work properly, "),r.a.createElement("a",null,"especially when it comes to sending emails to the right person.")),r.a.createElement("li",{className:"font-weight-bold mb-0"},"Adding a new case or editing an existing case (also a new or existing user)"),r.a.createElement("p",{className:"mb-1"},"When adding a new or editing an existing case all fields in a form marked with asterisks have to be filled."),r.a.createElement("p",{className:"mb-1"},"When ADMIN is editing user data, the user's password is displayed in an encrypted version. If you need to change this password, just enter a new password in plain text - it will be encrypted when the app saves it to the database."),r.a.createElement("p",{className:"mb-0"},"Because this is really simple application, it does not currently support the following situations (and does not display error messages):"),r.a.createElement("p",{className:"mb-0"},r.a.createElement("a",null,"\u2013 when a Head Teacher is adding or editing her/his own case as a User on any privileged dashboard (it means: not basic User Board) and gives her/himself as a Head Teacher, "),r.a.createElement("a",{className:"text-danger"},"this case will not be saved or updated in database"),r.a.createElement("a",null,",")),r.a.createElement("p",{className:"mb-0"},r.a.createElement("a",null,"\u2013 if any of the required field is not filled, "),r.a.createElement("a",{className:"text-danger"},"a case will not be saved or updated in database"),r.a.createElement("a",null,"."))),r.a.createElement(S.b,{to:"/help",className:"mt-0 mr-5"},"I. How to use this app"),r.a.createElement(S.b,{to:"/help2",className:"mt-0 mr-5"},"II. Predefined users and cases"),r.a.createElement(S.b,{to:"/help4",className:"mt-0 mr-5"},"IV. How it works"),r.a.createElement(S.b,{to:"/help5",className:"mt-0 mr-5"},"V. TO DO")))}}]),t}(n.Component),de=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("h2",{className:"mb-3"},"Absence Management System"),r.a.createElement("h5",null,"IV. HOW IT WORKS"),r.a.createElement("ul",{className:"ml-lg-0"},r.a.createElement("li",{className:"mb-1"},'When a USER needs to report any absence, she/he logs in to the application and adds their case. The app saves this case in a database and sends an email to the COVER SUPERVISOR with message "Action required".'),r.a.createElement("li",{className:"mb-1"},r.a.createElement("a",null,"COVER SUPERVISOR logs in to the application, finds the case whose id is given in the email message (usually it is displayed as the first case on the page), edits it when required (especially about ensuring teacher cover) and saves the case (even if nothing was changed \u2013 "),r.a.createElement("a",{className:"font-weight-bold text-danger"},"it is critically required"),r.a.createElement("a",null,"). Then the app sends an email to the appropriate HEAD TEACHER, provided by the USER.")),r.a.createElement("li",{className:"mb-1"},'HEAD TEACHER logs in to the application, finds the case, edits it ("Absence approved" & "Absence paid" fields must be checked) and saves. The next email is sent to HUMAN RESOURCES SUPERVISOR.'),r.a.createElement("li",{className:"mb-1"},'HUMAN RESOURCES SUPERVISOR logs in to the application, checks data and saves the case. If "Case resolved" field is marked with "yes", the app sends email to USER with message "Your case has been resolved".'),r.a.createElement("li",{className:"mb-1"},"If necessary every privileged user can add a case of any employee.")),r.a.createElement(S.b,{to:"/help",className:"mr-5"},"I. How to use this app"),r.a.createElement(S.b,{to:"/help2",className:"mr-5"},"II. Predefined users and cases"),r.a.createElement(S.b,{to:"/help3",className:"mr-5"},"III. Application requirements"),r.a.createElement(S.b,{to:"/help5",className:"mr-5"},"V. TO DO")))}}]),t}(n.Component),ue=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{fluid:!0},r.a.createElement("h2",{className:"mb-3"},"Absence Management System"),r.a.createElement("h5",null,"V. TO DO"),r.a.createElement("ul",{className:"ml-lg-0"},r.a.createElement("li",{className:"mb-1"},"Search buttons (User's cases, cases managed by provided Head Teacher, cases by issued dates)."),r.a.createElement("li",{className:"mb-1"},"Possibility of sorting cases by user's surname & name."),r.a.createElement("li",{className:"mb-1"},"Form validation at client side (checking required fields, comparing if User equals Head Teacher)."),r.a.createElement("li",{className:"mb-1"},"Improve user data editing (displaying password with asterisks, double check new password)."),r.a.createElement("li",{className:"mb-1"},"Scope of case editing depending on the position (different for Cover Supervisor, Head Teacher and HR Supervisor).")),r.a.createElement(S.b,{to:"/help",className:"mr-5"},"I. How to use this app"),r.a.createElement(S.b,{to:"/help2",className:"mr-5"},"II. Predefined users and cases"),r.a.createElement(S.b,{to:"/help3",className:"mr-5"},"III. Application requirements"),r.a.createElement(S.b,{to:"/help4",className:"mr-5"},"IV. How it works")))}}]),t}(n.Component),he=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).logOut=n.logOut.bind(Object(i.a)(n)),n.state={showCoverSupervisorBoard:!1,showHeadTeacherBoard:!1,showHRSupervisorBoard:!1,showAdminBoard:!1,currentUser:void 0,userForShow:""},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=C.getCurrentUser();a&&(this.setState({currentUser:C.getCurrentUser(),showCoverSupervisorBoard:a.roles.includes("ROLE_CS_SUPERVISOR"),showHeadTeacherBoard:a.roles.includes("ROLE_HEAD_TEACHER"),showHRSupervisorBoard:a.roles.includes("ROLE_HR_SUPERVISOR"),showAdminBoard:a.roles.includes("ROLE_ADMIN")}),fetch("api/users/show_user/"+C.getCurrentUser().id,{headers:U()}).then((function(e){return e.json()})).then((function(a){return e.setState({userForShow:a})})))}},{key:"logOut",value:function(){C.logout()}},{key:"render",value:function(){var e=this.state,a=e.currentUser,t=e.userForShow,n=e.showCoverSupervisorBoard,s=e.showHeadTeacherBoard,l=e.showHRSupervisorBoard,c=e.showAdminBoard;return r.a.createElement(S.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},a&&r.a.createElement(S.b,{to:{pathname:"/user",state:{requiredPage:1}},className:"navbar-brand"},"AMSystem"),r.a.createElement(S.b,{to:"/help",className:"navbar-brand"},"[help]"),r.a.createElement("div",{className:"navbar-nav mr-auto"},a&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.b,{to:{pathname:"/user",state:{requiredPage:1}},className:"nav-link"},"User Board: ",t.name," ",t.surname," (",t.jobTitle,")")),n&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.b,{to:{pathname:"/supervisor",state:{requiredPage:1}},className:"nav-link"},"Cover Supervisor Board")),s&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.b,{to:{pathname:"/supervisor",state:{requiredPage:1}},className:"nav-link"},"Head Teacher Board")),l&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.b,{to:{pathname:"/supervisor",state:{requiredPage:1}},className:"nav-link"},"HR Supervisor Board")),c&&r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.b,{to:{pathname:"/admin",state:{requiredPage:1}},className:"nav-link"},"Admin Board: Cases")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.b,{to:{pathname:"/users",state:{requiredPage:1}},className:"nav-link"},"Admin Board: Users")))),a?r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"/",className:"nav-link",onClick:this.logOut},"LogOut"))):r.a.createElement("div",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.b,{to:"/",className:"nav-link"},"Login")))),r.a.createElement("div",{className:"container mt-3"},r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/",exact:!0,component:N}),r.a.createElement(w.a,{path:"/user",exact:!0,component:F}),r.a.createElement(w.a,{path:"/add_user_case",exact:!0,component:G}),r.a.createElement(w.a,{path:"/supervisor",exact:!0,component:$}),r.a.createElement(w.a,{path:"/cases",exact:!0,component:ce}),r.a.createElement(w.a,{path:"/active_cases",exact:!0,component:Q}),r.a.createElement(w.a,{path:"/active_cases_managed_by_headteacher",exact:!0,component:Z}),r.a.createElement(w.a,{path:"/cases/:id",component:L}),r.a.createElement(w.a,{path:"/admin",exact:!0,component:ee}),r.a.createElement(w.a,{path:"/users",exact:!0,component:Y}),r.a.createElement(w.a,{path:"/users/:id",component:J}),r.a.createElement(w.a,{path:"/case_details",exact:!0,component:se}),r.a.createElement(w.a,{path:"/help",exact:!0,component:oe}),r.a.createElement(w.a,{path:"/help2",exact:!0,component:ie}),r.a.createElement(w.a,{path:"/help3",exact:!0,component:me}),r.a.createElement(w.a,{path:"/help4",exact:!0,component:de}),r.a.createElement(w.a,{path:"/help5",exact:!0,component:ue})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(77);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.61f225c6.chunk.js.map